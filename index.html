<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Randomizer</title>
    <style>
        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            background: #000; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer;
        }
        .content {
            max-height: 100vh; max-width: 100vw;
            display: none; /* Скрыты по умолчанию */
            object-fit: contain;
        }
    </style>
</head>
<body onclick="showNext()">

    <video id="vPlayer" class="content" autoplay playsinline></video>
    
    <img id="iPlayer" class="content" alt="Media">

    <script>
        // Список файлов (видео, фото, гифки) в папке media/
        const mediaFiles = [
            'video1.mp4',
            'photo1.jpg',
            'meme.gif',
            'cool-video.webm'
        ];

        let queue = [];
        const vPlayer = document.getElementById('vPlayer');
        const iPlayer = document.getElementById('iPlayer');

        function showNext() {
            if (queue.length === 0) {
                queue = [...mediaFiles].sort(() => Math.random() - 0.5);
            }

            const fileName = queue.pop();
            const ext = fileName.split('.').pop().toLowerCase();
            const path = 'media/' + fileName;

            // Скрываем оба плеера перед сменой
            vPlayer.style.display = 'none';
            iPlayer.style.display = 'none';
            vPlayer.pause();

            // Проверяем расширение
            if (['mp4', 'webm', 'mov'].includes(ext)) {
                vPlayer.src = path;
                vPlayer.style.display = 'block';
                vPlayer.play();
            } else {
                iPlayer.src = path;
                iPlayer.style.display = 'block';
            }
        }

        // Автопереход, если закончилось видео
        vPlayer.onended = showNext;

        // Запуск первого файла
        showNext();
    </script>
</body>
</html>

